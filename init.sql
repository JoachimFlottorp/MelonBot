CREATE SCHEMA IF NOT EXISTS `twitch` DEFAULT CHARACTER SET latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`channels` (`name` VARCHAR(255) NOT NULL,`user_id` VARCHAR(255) NOT NULL,`live` TINYINT(1) NOT NULL DEFAULT '0',`bot_permission` INT(11) NOT NULL DEFAULT '1',`viewers` JSON NULL DEFAULT NULL, `disabled_commands` JSON NOT NULL, PRIMARY KEY (`name`), UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC),UNIQUE INDEX `name_UNIQUE` (`name` ASC),	`seventv_emote_set` LONGTEXT NOT NULL COLLATE 'latin1_swedish_ci') ENGINE = InnoDB DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`commands` (`id` INT(11) NOT NULL AUTO_INCREMENT, `name` TEXT NOT NULL, `description` TEXT NOT NULL, `perm` INT(11) NOT NULL, PRIMARY KEY (`id`)) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`banphrases` (`channel` VARCHAR(255) NOT NULL,`Phrase` JSON NOT NULL,PRIMARY KEY (`channel`),INDEX `fk_banphrases_channels_idx` (`channel` ASC),CONSTRAINT `fk_banphrases_channels` FOREIGN KEY (`channel`) REFERENCES `twitch`.`channels` (`name`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`stats` (`name` VARCHAR(255) NOT NULL, `commands_handled` INT(11) NOT NULL DEFAULT '0', `forsen` INT(11) NOT NULL DEFAULT '0', PRIMARY KEY (`name`), INDEX `fk_stats_channels_idx` (`name` ASC), CONSTRAINT `fk_stats_channels` FOREIGN KEY (`name`) REFERENCES `twitch`.`channels` (`name`) ON DELETE CASCADE ON UPDATE CASCADE)ENGINE = InnoDB DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`tokens` (`id` VARCHAR(11) NOT NULL, `access_token` TEXT NOT NULL, `name` VARCHAR(255) NOT NULL, `refresh_token` TEXT NULL DEFAULT NULL, `scope` TEXT NOT NULL, `expires_in` DATE NOT NULL, PRIMARY KEY (`id`), UNIQUE INDEX `id_UNIQUE` (`id` ASC), INDEX `fk_tokens_channels1_idx` (`name` ASC), CONSTRAINT `fk_tokens_channels1` FOREIGN KEY (`name`) REFERENCES `twitch`.`channels` (`name`) ON DELETE CASCADE ON UPDATE CASCADE, CONSTRAINT `fk_tokens_channels2` FOREIGN KEY (`id`) REFERENCES `twitch`.`channels` (`user_id`) ON DELETE CASCADE ON UPDATE CASCADE) ENGINE = InnoDB DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`suggestions` (`suggestion_id` INT(11) NOT NULL AUTO_INCREMENT, `suggestion` TEXT NOT NULL, `request_username` TEXT NOT NULL, PRIMARY KEY (`suggestion_id`)) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`error_logs` (`error_id` INT(11) NOT NULL AUTO_INCREMENT, `error_message` TEXT NOT NULL, `timestamp` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`error_id`)) ENGINE = InnoDB AUTO_INCREMENT = 1 DEFAULT CHARACTER SET = latin1;
CREATE TABLE IF NOT EXISTS `twitch`.`config` (`ID` ENUM('1') NOT NULL, `TwitchClientID` VARCHAR(45) NOT NULL, `TwitchClientSecret` VARCHAR(45) NOT NULL, `TwitchOAuth` VARCHAR(45) NOT NULL, `WebUrl` VARCHAR(45) NOT NULL DEFAULT 'http://localhost:3000', `BotUsername` VARCHAR(45) NOT NULL DEFAULT 'foobar', `OwnerUserID` VARCHAR(11) NOT NULL DEFAULT '00000000', `BotUserID` VARCHAR(11) NOT NULL,`TwitchAppTokenExpireDate` DATE NULL, PRIMARY KEY (`ID`));
CREATE TABLE IF NOT EXISTS `twitch`.`trivia`( `channel` VARCHAR(255) NOT NULL, `user_id` VARCHAR(255) NOT NULL, `cooldown` INT(255) NOT NULL COMMENT 'Formatted as Milliseconds', `filter` JSON NOT NULL COMMENT 'filter: {\n exclude: string[],\n include: string[]\n}', `leaderboard` JSON NOT NULL, PRIMARY KEY(`user_id`), INDEX `fk_trivia_channels1_idx`(`user_id` ASC), CONSTRAINT `fk_trivia_channels1` FOREIGN KEY(`user_id`) REFERENCES `twitch`.`channels`(`user_id`) ON DELETE CASCADE ON UPDATE CASCADE ) ENGINE = InnoDB;